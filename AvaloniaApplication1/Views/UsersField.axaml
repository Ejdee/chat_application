<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:AvaloniaApplication1.ViewModels"
             mc:Ignorable="d" d:DesignWidth="300" d:DesignHeight="450"
             x:Class="AvaloniaApplication1.Views.UsersField"
             x:CompileBindings="True"
             x:DataType="vm:UsersFieldViewModel"
             HorizontalAlignment="Center">

  <Border Padding="10" Width="300">
    <DockPanel>
      <TextBlock Text="Pick a Chat"
                 FontWeight="Bold"
                 FontSize="18"
                 HorizontalAlignment="Center"
                 DockPanel.Dock="Top"
                 Margin="0,10,0,20"/>
      <Button 
        DockPanel.Dock="Bottom"
        HorizontalAlignment="Center"
        Margin="0,20,0,0"
        Command="{Binding OpenChatRandom}">Pick a Random</Button>

      <ScrollViewer MaxHeight="350" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <ListBox ItemsSource="{Binding Users}" SelectedItem="{Binding SelectedUser, Mode=TwoWay}">
          <ListBox.ItemTemplate>
            <DataTemplate DataType="vm:UserViewModel">
              <Border Margin="5"
                      Padding="10"
                      CornerRadius="8"
                      Background="#36454F">
                <Grid ColumnDefinitions="Auto,*">
                  <Border Width="40"
                          Height="40"
                          CornerRadius="20"
                          Background="{Binding AvatarColor}">
                    <TextBlock Text="{Binding Initials}"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               FontWeight="Bold"
                               Foreground="Black"/>
                  </Border>
                  <StackPanel Grid.Column="1" Margin="10,0,0,0">
                    <TextBlock Text="{Binding Name}" FontWeight="SemiBold"/>
                    <Grid ColumnDefinitions="Auto,*">
                      <Ellipse Width="8"
                               Height="8"
                               Fill="{Binding StatusColor}"
                               VerticalAlignment="Center"/>
                      <TextBlock Grid.Column="1"
                                 Text="{Binding Status}"
                                 FontSize="12"
                                 Opacity="0.7"
                                 Margin="5,0,0,0"/>
                    </Grid>
                  </StackPanel>
                </Grid>
              </Border>
            </DataTemplate>
          </ListBox.ItemTemplate>
        </ListBox>
      </ScrollViewer>
    </DockPanel>
  </Border>
</UserControl>